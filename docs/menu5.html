<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>汎用文字列スプリッター</title>
  <style>
    /* ======== ここまでが CSS ======== */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 20px;
      background-color: #f4f7f6;
      color: #333;
    }

    /* 中略（スタイルは元のまま） */

    .footer {
      text-align: center;
      margin-top: 40px;
      font-size: 0.9em;
      color: #777;
    }
  </style>

  <!-- ▼▼▼ ここで切るとちょうど良いです ▼▼▼ -->
  <button style="display:block;margin:20px auto;" onclick="alert('ここでHTMLを分割してください。\n以下がJSです');">
    ▼ スクリプト開始 ▼
  </button>
  <!-- ▲▲▲ このボタンの直後からJSを分けると安全です ▲▲▲ -->
</head>
<body>
  <div class="container">
    <h1>汎用文字列スプリッター</h1>

    <label for="textInput">テキストをここにペーストしてください:</label>
    <textarea id="textInput" placeholder="例: 長い文字列\nで改行..."></textarea>

    <button id="splitButton" onclick="splitAndDisplay()">分割して表示</button>

    <div class="results">
      <h2>分割結果</h2>
      <h3>Part 1</h3>
      <pre id="textPart1" class="no-content">ここに文字列のPart 1が表示されます。</pre>
      <div class="copy-button-container">
        <button class="copy-btn" onclick="copyToClipboard('textPart1')">Part 1 をコピー</button>
      </div>

      <h3>Part 2</h3>
      <pre id="textPart2" class="no-content">ここに文字列のPart 2が表示されます。</pre>
      <div class="copy-button-container">
        <button class="copy-btn" onclick="copyToClipboard('textPart2')">Part 2 をコピー</button>
      </div>
    </div>
  </div>

  <footer class="footer">
    <p>&copy; 2025 汎用文字列スプリッター. All rights reserved.</p>
  </footer>

  <script>
    // ==== JavaScript 開始 ====

    function splitAndDisplay() {
      const textInput = document.getElementById('textInput').value;

      if (!textInput) {
        alert("テキストが入力されていません。");
        return;
      }

      const textLength = textInput.length;
      const idealSplit = Math.floor(textLength / 2);
      let splitIndex = idealSplit;
      let foundNewline = false;

      for (let i = idealSplit; i >= 0; i--) {
        if (textInput[i] === '\n') {
          splitIndex = i + 1;
          foundNewline = true;
          break;
        }
      }

      if (!foundNewline) {
        for (let i = idealSplit; i < textLength; i++) {
          if (textInput[i] === '\n') {
            splitIndex = i + 1;
            foundNewline = true;
            break;
          }
        }
      }

      if (!foundNewline) {
        splitIndex = idealSplit;
      }

      const textPart1 = textInput.substring(0, splitIndex);
      const textPart2 = textInput.substring(splitIndex);

      document.getElementById('textPart1').textContent = textPart1;
      document.getElementById('textPart2').textContent = textPart2;

      document.getElementById('textPart1').classList.remove('no-content');
      document.getElementById('textPart2').classList.remove('no-content');
    }

    async function copyToClipboard(id) {
      const el = document.getElementById(id);
      const text = el.textContent;

      if (el.classList.contains('no-content')) {
        alert('まだ分割されていません。');
        return;
      }

      try {
        await navigator.clipboard.writeText(text);
        alert('コピーしました！');
      } catch (e) {
        alert('コピーに失敗しました。');
      }
    }

    // ==== JavaScript 終了 ====
  </script>
</body>
</html>
